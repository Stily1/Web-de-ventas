<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Agregar Stock</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet">

  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body class="container mt-4">

<!-- âœ… Vista SOLO para ADMIN -->
<div sec:authorize="hasRole('ADMIN')">

  <h1>â• Agregar Stock</h1>

  <p>
    <a href="/productos" style="text-decoration: underline;">â¬… Volver a productos</a>
  </p>

  <hr>

  <p>
    <strong>Producto:</strong>
    <span th:text="${producto.nombre}"></span><br>
    <strong>Stock actual:</strong>
    <span th:text="${producto.stock}"></span>
  </p>

  <form th:action="@{/productos/{id}/stock(id=${producto.id})}" method="post">
    <label class="form-label">Cantidad a agregar:</label>
    <input type="number" name="cantidad" min="1" required class="form-control mb-2">

    <button type="submit" class="btn btn-success">
      Sumar stock
    </button>
  </form>

</div>

<!-- ğŸš« Si NO es ADMIN, mostrar mensaje -->
<div sec:authorize="!hasRole('ADMIN')" class="text-center mt-5">
  <h1 class="text-danger">ğŸš« Acceso denegado</h1>
  <p>No tienes permiso para agregar stock.</p>

  <a href="/ventas" class="btn btn-primary me-2">ğŸ“Š Ir a ventas</a>
  <a href="/" class="btn btn-secondary">ğŸ  Inicio</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
